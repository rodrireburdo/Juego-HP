<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desafío Harry Potter</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #1a1a40, #3a2d6f);
            text-align: center;
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            max-width: 90%;
            backdrop-filter: blur(10px);
        }
        button {
            background: #d4af37;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            font-weight: bold;
        }
        button:hover {
            background: #b8860b;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <audio id="bg-music" loop>
        <source src="harrypotter.mp3" type="audio/mp3">
    </audio>
    <div class="container" id="startScreen">
        <h1>Hola Emilie, Bienvenida al Desafío de Harry Potter</h1>
        <p>Si respondes 8 de 10 preguntas correctamente, podrás elegir tu premio.
        Si no lo logras... Me gano un beso. 😘</p>
        <button id="startGame">¡Jugar!</button>
    </div>
    
    <div class="container hidden" id="quizScreen">
        <h2>Pregunta <span id="questionNumber">1</span>/10</h2>
        <p id="questionText"></p>
        <div id="optionsContainer"></div>
        <button id="nextQuestion" class="hidden">Siguiente</button>
    </div>
    
    <div class="container hidden" id="resultScreen">
        <h2 id="resultMessage"></h2>
        <p id="resultDetail"></p>
        <p>Espero te haya gustado 💖.</p>
        <p>Mandame captura, no me hagas trampa.</p>
    </div>
    
    <script>
        const questions = [
            { q: "¿Qué son los muggles?", options: ["Personas Normales", "Animales Mágicos", "Personas Mágicas"], correct: 2 },
            { q: "¿Qué objeto permite viajar en el tiempo?", options: ["Giratiempo", "Pensadero", "Ojo de Águila"], correct: 0 },
            { q: "¿Cuál es el nombre completo de Voldemort?", options: ["Tom Marvolo Riddle", "Tom Elvis Riddle", "Tom Severus Riddle"], correct: 0 },
            { q: "Cuál es el hechizo que se usa contra los dementores?", options: ["Expecto Patronum", "Expelliarmus", "Protego Maxima"], correct: 0 },
            { q: "¿Cómo se llama el libro que Harry usa en 'El Príncipe Mestizo'?", options: ["Magia Avanzada", "Guía de Pociones", "Libro del Príncipe Mestizo"], correct: 2 },
            { q: "¿Qué hechizo usa Dumbledore contra Voldemort en el Ministerio?", options: ["Expelliarmus", "Protego Maxima", "Fuego Maldito"], correct: 2 },
            { q: "¿Qué criatura tiene sangre plateada?", options: ["Hipogrifo", "Unicornio", "Testral"], correct: 1 },
            { q: "Cómo se llama el mapa mágico que muestra toda la distribución de Hogwarts?", options: ["Mapa de Felix Felicis", "Mapa del Merodeador", "Mapa de Hogwarts"], correct: 1 },
            { q: "¿Cuál es la varita más poderosa del mundo mágico?", options: ["Varita de Saúco", "Varita de Draco Malfoy", "Varita de Voldemort"], correct: 0 },
            { q: "¿Cuántos hermanos tiene Ron Weasley?", options: ["5", "6", "7"], correct: 1 }
        ];
        
        let currentQuestion = 0;
        let correctAnswers = 0;

        // Verificar si ya jugó antes
        const previousResult = localStorage.getItem("hp_quiz_result");
        if (previousResult) {
            document.getElementById("startScreen").classList.add("hidden");
            document.getElementById("resultScreen").classList.remove("hidden");
            document.getElementById("resultMessage").textContent = previousResult === "win" ? "¡Me Ganaste! 🎉" : "¡Perdiste JAJA! 😈";
            document.getElementById("resultDetail").textContent = previousResult === "win" ? "Podes elegir tu premio..." : "Me debes un beso.";
        } else {
            document.getElementById("startGame").addEventListener("click", () => {
                document.getElementById("bg-music").play();
                document.getElementById("startScreen").classList.add("hidden");
                document.getElementById("quizScreen").classList.remove("hidden");
                showQuestion();
            });
        }

        function showQuestion() {
            const questionData = questions[currentQuestion];
            document.getElementById("questionNumber").textContent = currentQuestion + 1;
            document.getElementById("questionText").textContent = questionData.q;
            const optionsContainer = document.getElementById("optionsContainer");
            optionsContainer.innerHTML = "";
            questionData.options.forEach((option, index) => {
                const btn = document.createElement("button");
                btn.textContent = option;
                btn.onclick = () => {
                    if (index === questionData.correct) correctAnswers++;
                    nextQuestion();
                };
                optionsContainer.appendChild(btn);
            });
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < questions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            document.getElementById("quizScreen").classList.add("hidden");
            document.getElementById("resultScreen").classList.remove("hidden");
            let result;
            if (correctAnswers >= 8) {
                result = "win";
                document.getElementById("resultMessage").textContent = "¡Me Ganaste! 🎉";
                document.getElementById("resultDetail").textContent = "Podes elegir tu premio...";
            } else {
                result = "lose";
                document.getElementById("resultMessage").textContent = "¡Perdiste JAJA! 😈";
                document.getElementById("resultDetail").textContent = "Me debes un beso.";
            }
            localStorage.setItem("hp_quiz_result", result);
        }
    </script>
</body>
</html>